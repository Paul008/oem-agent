{
  // Multi-OEM AI Agent â€” OpenClaw on Moltworker
  // Docs: https://developers.cloudflare.com/workers/wrangler/configuration/

  "name": "oem-agent",
  "main": "src/index.ts",
  "compatibility_date": "2026-02-11",
  "compatibility_flags": ["nodejs_compat"],

  // R2 Storage (agent memory + OEM assets)
  "r2_buckets": [
    {
      "binding": "MOLTBOT_BUCKET",
      "bucket_name": "oem-agent-assets"
    }
  ],

  // Browser Rendering (headless Chromium via CDP)
  "browser": {
    "binding": "BROWSER"
  },

  // AI Gateway (observability proxy)
  "ai": {
    "binding": "AI"
  },

  // Cloudflare Containers (Sandbox for code execution)
  "containers": [
    {
      "class_name": "Sandbox",
      "image": "./Dockerfile",
      "instance_type": "standard-1",
      "max_instances": 1
    }
  ],

  // Cloudflare Sandbox (Durable Object binding)
  "durable_objects": {
    "bindings": [
      {
        "name": "Sandbox",
        "class_name": "Sandbox"
      }
    ]
  },

  // Migrations for Durable Objects with Containers (requires new_sqlite_classes)
  "migrations": [
    {
      "tag": "v1",
      "new_sqlite_classes": ["Sandbox"]
    }
  ],

  // Environment Variables
  "vars": {
    "ENVIRONMENT": "production",
    "SANDBOX_SLEEP_AFTER": "never",
    "DEV_MODE": "true",
    "OPENCLAW_DEV_MODE": "true"
  },

  // Secrets (set via `wrangler secret put`):
  // SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY
  // GROQ_API_KEY, TOGETHER_API_KEY, ANTHROPIC_API_KEY
  // SLACK_BOT_TOKEN, SLACK_SIGNING_SECRET
  // CDP_SECRET

  // Cron Triggers (crawl schedules)
  "triggers": {
    "crons": [
      "0 */2 * * *",
      "0 */4 * * *",
      "0 */12 * * *",
      "0 6 * * *",
      "0 7 * * *"
    ]
  },

  // Dev environment
  "env": {
    "dev": {
      "name": "oem-agent-dev",
      "vars": {
        "ENVIRONMENT": "development"
      },
      "r2_buckets": [
        {
          "binding": "MOLTBOT_BUCKET",
          "bucket_name": "oem-agent-assets-dev"
        }
      ]
    }
  }
}
